digraph Grammar {
  rankdir=LR;
  node [fontname="Helvetica", fontsize=12];
  edge [fontname="Helvetica", fontsize=10];
  "start" [shape=none, label=""];
  "start" -> "S";
  "S" [shape=circle, style=bold, peripheries=2];
  "A" [shape=circle];
  "B" [shape=circle];
  "C" [shape=circle];
  "D" [shape=circle];
  "d" [shape=plaintext];
  "a" [shape=plaintext];
  "b" [shape=plaintext];
  "prod_0" [shape=box, label="C → b C"];
  "C" -> "prod_0" [color=blue];
  "prod_0" -> "b" [color=red, style=dashed];
  "prod_0" -> "C" [color=red, style=dashed];
  "prod_1" [shape=box, label="C → b"];
  "C" -> "prod_1" [color=blue];
  "prod_1" -> "b" [color=red, style=dashed];
  "prod_2" [shape=box, label="D → A B"];
  "D" -> "prod_2" [color=blue];
  "prod_2" -> "A" [color=red, style=dashed];
  "prod_2" -> "B" [color=red, style=dashed];
  "prod_3" [shape=box, label="S → d"];
  "S" -> "prod_3" [color=blue];
  "prod_3" -> "d" [color=red, style=dashed];
  "prod_4" [shape=box, label="S → d S"];
  "S" -> "prod_4" [color=blue];
  "prod_4" -> "d" [color=red, style=dashed];
  "prod_4" -> "S" [color=red, style=dashed];
  "prod_5" [shape=box, label="S → a B d B"];
  "S" -> "prod_5" [color=blue];
  "prod_5" -> "a" [color=red, style=dashed];
  "prod_5" -> "B" [color=red, style=dashed];
  "prod_5" -> "d" [color=red, style=dashed];
  "prod_5" -> "B" [color=red, style=dashed];
  "prod_6" [shape=box, label="S → d B"];
  "S" -> "prod_6" [color=blue];
  "prod_6" -> "d" [color=red, style=dashed];
  "prod_6" -> "B" [color=red, style=dashed];
  "prod_7" [shape=box, label="A → d"];
  "A" -> "prod_7" [color=blue];
  "prod_7" -> "d" [color=red, style=dashed];
  "prod_8" [shape=box, label="A → d S"];
  "A" -> "prod_8" [color=blue];
  "prod_8" -> "d" [color=red, style=dashed];
  "prod_8" -> "S" [color=red, style=dashed];
  "prod_9" [shape=box, label="A → a B d B"];
  "A" -> "prod_9" [color=blue];
  "prod_9" -> "a" [color=red, style=dashed];
  "prod_9" -> "B" [color=red, style=dashed];
  "prod_9" -> "d" [color=red, style=dashed];
  "prod_9" -> "B" [color=red, style=dashed];
  "prod_10" [shape=box, label="B → a"];
  "B" -> "prod_10" [color=blue];
  "prod_10" -> "a" [color=red, style=dashed];
  "prod_11" [shape=box, label="B → a S"];
  "B" -> "prod_11" [color=blue];
  "prod_11" -> "a" [color=red, style=dashed];
  "prod_11" -> "S" [color=red, style=dashed];
  "prod_12" [shape=box, label="B → A C"];
  "B" -> "prod_12" [color=blue];
  "prod_12" -> "A" [color=red, style=dashed];
  "prod_12" -> "C" [color=red, style=dashed];
  "prod_13" [shape=box, label="B → d"];
  "B" -> "prod_13" [color=blue];
  "prod_13" -> "d" [color=red, style=dashed];
  "prod_14" [shape=box, label="B → d S"];
  "B" -> "prod_14" [color=blue];
  "prod_14" -> "d" [color=red, style=dashed];
  "prod_14" -> "S" [color=red, style=dashed];
  "prod_15" [shape=box, label="B → a B d B"];
  "B" -> "prod_15" [color=blue];
  "prod_15" -> "a" [color=red, style=dashed];
  "prod_15" -> "B" [color=red, style=dashed];
  "prod_15" -> "d" [color=red, style=dashed];
  "prod_15" -> "B" [color=red, style=dashed];
  subgraph cluster_legend {
    label="Legend"; style=dotted; fontsize=10;
    "legend_nt" [shape=circle, label="Non-Terminal"];
    "legend_start" [shape=circle, style=bold, peripheries=2, label="Start Symbol"];
    "legend_term" [shape=plaintext, label="Terminal"];
    "legend_prod" [shape=box, label="Production"];
    "legend_deriv" [shape=plaintext, label="Blue: Derives"];
    "legend_refs" [shape=plaintext, label="Red: References"];
  }
}
